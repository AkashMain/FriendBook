<%= "Logged in as #{current_user.fname}"%><br><br>

<h1>All Posts</h1>
<%= form_tag posts_path, :method => 'get', :id => "postsSearch", remote: true do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil,class: 'btn btn-outline-success' %>
  </p>
<%end%>  

<ul>
  <div class="show-posts">
    <% @posts.each do |post| %>
      <li>
        <p>
          <%= link_to "-> #{post.user.fname}", user_path(post.user), style: 'color:#2F4F4F'%>
          <br>
          <%= post.body%><br>
          <% if post.image.attached? %>
            <%= link_to image_tag(post.image), url_for(post.image), target: '_blank' %>
          <% end %>
          <% if user_signed_in? && current_user.id==post.user.id%> 
            <%= delete_post(post) %><br>
          <%end%> 
          <div class="show-likes for-post-<%=post.id%>">
            Likes: <%= Like.where(likable_id: post.id, likable_type: "Post").count %><br>
              <% if user_signed_in? && current_user.id != post.user.id %>
                <%= like_button_post(post)%>
              <% end %>
          <br>    
          </div>  
          <%= link_to 'Comments', post, style: 'color:#A0522D'%>
        </p> 
      </li>
    <% end %>
  </div>
</ul>

<%# <div id="showing-posts"></div> %>

<%= link_to "New Post", new_post_path, style: 'color:0000FF' %>

<br><br>
<div id="infinite-scrolling">
  <%= will_paginate @posts %>
</div>

